{% extends "bmsapp/base.html" %}
{% load staticfiles %}

{% block pagetitle %}Reports/Charts{% endblock %}

{% block head %}
<script src="{% static 'bmsapp/scripts/gauge.min.js' %}"></script>
<script src="{% static 'bmsapp/scripts/reports.js' %}?t={{ curtime }}"></script>
<script src="{% static 'bmsapp/scripts/dashboard.js' %}?t={{ curtime }}"></script>
{% endblock %}

{% block this_nav_link %}link_reports{% endblock %}

{% block title %}Charts and Reports{% endblock %}

{% block content %}

<form>
    <div class="form-row align-items-end justify-content-around">
        <div class="form-group col-auto">
            <label for="select_group">Facility Group:</label>
            <select class="form-control" id="select_group" name="select_group">
                {{ groups_html|safe }}
            </select>
        </div>
        <div class="form-group col-auto">
            <label for="select_bldg">Facility:</label>
            <select class="form-control" id="select_bldg" name="select_bldg">
                {{ bldgs_html|safe }}
            </select>
        </div>
        <div class="form-group col-auto">
            <label for="select_chart">Graph/Report:</label>
            <select class="form-control" id="select_chart" name="select_chart">
                {{ chart_list_html|safe }}
            </select>
        </div>
        <div class="form-group col-auto">
            <button class="btn btn-secondary col" id="refresh" type="button">Refresh Data</button>
        </div>
    </div>
</form>

<hr class="mt-1">

<p>
    <span id="ctrl_sensor">
        Select Values to Plot: <select id="select_sensor" name="select_sensor">
            {{ sensor_list_html|safe }}
        </select>&nbsp;&nbsp;
    </span>
    <span id="ctrl_avg">
        Data Averaging:
        <select id="averaging_time" name="averaging_time">
            <option value="0" selected>None</option>
            <option value="0.5">30 minutes</option>
            <option value="1">1 hour</option>
            <option value="2">2 hour</option>
            <option value="4">4 hour</option>
            <option value="8">8 hour</option>
            <option value="24">1 day</option>
            <option value="168">1 week</option>
            <option value="720">1 month</option>
            <option value="8760">1 year</option>
        </select>
    </span>
    <span id="ctrl_avg_export">
        Data Averaging:
        <select id="averaging_time_export" name="averaging_time_export">
            <option value="0.25">15 minutes</option>
            <option value="0.5" selected>30 minutes</option>
            <option value="1">1 hour</option>
            <option value="2">2 hour</option>
            <option value="4">4 hour</option>
            <option value="8">8 hour</option>
            <option value="24">1 day</option>
            <option value="168">1 week</option>
            <option value="720">1 month</option>
            <option value="8760">1 year</option>
        </select>
    </span>
    <span id="ctrl_normalize">
        <input type="checkbox" id="normalize" name="normalize"/>
            <label for="normalize" class="but_lbl">Scale Values to 0 - 100%</label>
    </span>
    <span id="ctrl_occupied">
        <input type="checkbox" id="show_occupied" name="show_occupied"/>
            <label for="show_occupied" class="but_lbl">Shade Occupied Periods</label>
    </span>
</p>

<div id="xy_controls">
    <p>
        Sensor X: <select id="select_sensor_x" name="select_sensor_x">
            {{ sensor_list_html|safe }}
        </select>&nbsp;&nbsp;
        Sensor Y: <select id="select_sensor_y" name="select_sensor_y">
            {{ sensor_list_html|safe }}
        </select>
    </p>
    <p>
        <span>
            Data Averaging:
            <select id="averaging_time_xy" name="averaging_time_xy">
                <option value="0.25">15 minutes</option>
                <option value="0.5" selected>30 minutes</option>
                <option value="1">1 hour</option>
                <option value="2">2 hour</option>
                <option value="4">4 hour</option>
                <option value="8">8 hour</option>
                <option value="24">1 day</option>
                <option value="168">1 week</option>
                <option value="720">1 month</option>
                <option value="8760">1 year</option>
            </select>
        </span>&nbsp;&nbsp;
        Divide Data at this Date: <input id="div_date" type="text" name="div_date" size="7"/>
    </p>
</div>

<hr class="mt-1">
<form>
    <div class="form-row justify-content-sm-center">
        <label class="mb-3 mr-1" for="time_period_group">Time Period:</label>
        <div id="time_period_group" class="btn-group flex-wrap btn-group-toggle form-group col-auto" data-toggle="buttons">
            <label class="btn btn-secondary btn-sm">
                <input type="radio" name="time_period" id="4h" value="0.16667" autocomplete="off">
                <span class="d-none d-sm-inline">4 hr</span><span class="d-sm-none">4h</span>
            </label>
            <label class="btn btn-secondary btn-sm">
                <input type="radio" name="time_period" id="1d" value="1" autocomplete="off">
                <span class="d-none d-sm-inline">1 da</span><span class="d-sm-none">1d</span>
            </label>
            <label class="btn btn-secondary btn-sm">
                <input type="radio" name="time_period" id="3d" value="3" autocomplete="off">
                <span class="d-none d-sm-inline">3 da</span><span class="d-sm-none">3d</span>
            </label>
            <label class="btn btn-secondary btn-sm active">
                <input type="radio" name="time_period" id="1w" value="7" autocomplete="off" checked>
                <span class="d-none d-sm-inline">1 wk</span><span class="d-sm-none">1w</span>
            </label>
            <label class="btn btn-secondary btn-sm">
                <input type="radio" name="time_period" id="2w" value="14" autocomplete="off">
                <span class="d-none d-sm-inline">2 wk</span><span class="d-sm-none">2w</span>
            </label>
            <label class="btn btn-secondary btn-sm">
                <input type="radio" name="time_period" id="1m" value="31" autocomplete="off">
                <span class="d-none d-sm-inline">1 mo</span><span class="d-sm-none">1m</span>
            </label>
            <label class="btn btn-secondary btn-sm">
                <input type="radio" name="time_period" id="2m" value="61" autocomplete="off">
                <span class="d-none d-sm-inline">2 mo</span><span class="d-sm-none">2m</span>
            </label>
            <label class="btn btn-secondary btn-sm">
                <input type="radio" name="time_period" id="4m" value="122" autocomplete="off">
                <span class="d-none d-sm-inline">4 mo</span><span class="d-sm-none">4m</span>
            </label>
            <label class="btn btn-secondary btn-sm">
                <input type="radio" name="time_period" id="1y" value="365" autocomplete="off">
                <span class="d-none d-sm-inline">1 yr</span><span class="d-sm-none">1y</span>
            </label>
            <label class="btn btn-secondary btn-sm">
                <input type="radio" name="time_period" id="all" value="10000" autocomplete="off">All
            </label>
            <label class="btn btn-secondary btn-sm">
                <input type="radio" name="time_period" id="custom" value="custom" autocomplete="off">Custom
            </label>
        </div>
        <div class="form-group form-inline col-auto" id="custom_dates">
            <label class="mr-1" for="start_date"> Start:</label><input id="start_date" name="start_date" width="160"/>
            <label class="mr-1 ml-2" for="end_date">End:</label><input id="end_date" name="end_date" width="160" />
        </div>
    </div>
</form>

<p>
<button id="download_many">Download Excel Spreadsheet</button>
</p>

<div id="results">
</div>

<div class="d-flex justify-content-end">
    <a id="get_embed_link">-- Get Link --</a>
</div>

{% endblock %}
